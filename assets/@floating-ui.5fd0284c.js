function M(t){return t.split("-")[0]}function $(t){return t.split("-")[1]}function _(t){return["top","bottom"].includes(M(t))?"x":"y"}function Z(t){return t==="y"?"height":"width"}function z(t,n,e){let{reference:i,floating:o}=t;const s=i.x+i.width/2-o.width/2,l=i.y+i.height/2-o.height/2,r=_(n),c=Z(r),f=i[c]/2-o[c]/2,d=M(n),u=r==="x";let a;switch(d){case"top":a={x:s,y:i.y-o.height};break;case"bottom":a={x:s,y:i.y+i.height};break;case"right":a={x:i.x+i.width,y:l};break;case"left":a={x:i.x-o.width,y:l};break;default:a={x:i.x,y:i.y}}switch($(n)){case"start":a[r]-=f*(e&&u?-1:1);break;case"end":a[r]+=f*(e&&u?-1:1);break}return a}const ct=async(t,n,e)=>{const{placement:i="bottom",strategy:o="absolute",middleware:s=[],platform:l}=e,r=s.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(n));let f=await l.getElementRects({reference:t,floating:n,strategy:o}),{x:d,y:u}=z(f,i,c),a=i,h={},g=0;for(let p=0;p<r.length;p++){const{name:O,fn:S}=r[p],{x:N,y:C,data:L,reset:x}=await S({x:d,y:u,initialPlacement:i,placement:a,strategy:o,middlewareData:h,rects:f,platform:l,elements:{reference:t,floating:n}});if(d=N!=null?N:d,u=C!=null?C:u,h={...h,[O]:{...h[O],...L}},x&&g<=50){g++,typeof x=="object"&&(x.placement&&(a=x.placement),x.rects&&(f=x.rects===!0?await l.getElementRects({reference:t,floating:n,strategy:o}):x.rects),{x:d,y:u}=z(f,a,c)),p=-1;continue}}return{x:d,y:u,placement:a,strategy:o,middlewareData:h}};function lt(t){return{top:0,right:0,bottom:0,left:0,...t}}function ft(t){return typeof t!="number"?lt(t):{top:t,right:t,bottom:t,left:t}}function I(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}const ut=Math.min,at=Math.max;function dt(t,n,e){return at(t,ut(n,e))}const Ot=t=>({name:"arrow",options:t,async fn(n){const{element:e,padding:i=0}=t!=null?t:{},{x:o,y:s,placement:l,rects:r,platform:c}=n;if(e==null)return{};const f=ft(i),d={x:o,y:s},u=_(l),a=$(l),h=Z(u),g=await c.getDimensions(e),p=u==="y"?"top":"left",O=u==="y"?"bottom":"right",S=r.reference[h]+r.reference[u]-d[u]-r.floating[h],N=d[u]-r.reference[u],C=await(c.getOffsetParent==null?void 0:c.getOffsetParent(e));let L=C?u==="y"?C.clientHeight||0:C.clientWidth||0:0;L===0&&(L=r.floating[h]);const x=S/2-N/2,k=f[p],Y=L-g[h]-f[O],R=L/2-g[h]/2+x,B=dt(k,R,Y),st=(a==="start"?f[p]:f[O])>0&&R!==B&&r.reference[h]<=r.floating[h]?R<k?k-R:Y-R:0;return{[u]:d[u]-st,data:{[u]:B,centerOffset:R-B}}}});async function ht(t,n){const{placement:e,platform:i,elements:o}=t,s=await(i.isRTL==null?void 0:i.isRTL(o.floating)),l=M(e),r=$(e),c=_(e)==="x",f=["left","top"].includes(l)?-1:1,d=s&&c?-1:1,u=typeof n=="function"?n(t):n;let{mainAxis:a,crossAxis:h,alignmentAxis:g}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return r&&typeof g=="number"&&(h=r==="end"?g*-1:g),c?{x:h*d,y:a*f}:{x:a*f,y:h*d}}const Dt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(n){const{x:e,y:i}=n,o=await ht(n,t);return{x:e+o.x,y:i+o.y,data:o}}}};function b(t){var n;return((n=t.ownerDocument)==null?void 0:n.defaultView)||window}function m(t){return b(t).getComputedStyle(t)}function v(t){return nt(t)?(t.nodeName||"").toLowerCase():""}let P;function tt(){if(P)return P;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(P=t.brands.map(n=>n.brand+"/"+n.version).join(" "),P):navigator.userAgent}function w(t){return t instanceof b(t).HTMLElement}function y(t){return t instanceof b(t).Element}function nt(t){return t instanceof b(t).Node}function K(t){if(typeof ShadowRoot>"u")return!1;const n=b(t).ShadowRoot;return t instanceof n||t instanceof ShadowRoot}function W(t){const{overflow:n,overflowX:e,overflowY:i,display:o}=m(t);return/auto|scroll|overlay|hidden/.test(n+i+e)&&!["inline","contents"].includes(o)}function gt(t){return["table","td","th"].includes(v(t))}function j(t){const n=/firefox/i.test(tt()),e=m(t),i=e.backdropFilter||e.WebkitBackdropFilter;return e.transform!=="none"||e.perspective!=="none"||(i?i!=="none":!1)||n&&e.willChange==="filter"||n&&(e.filter?e.filter!=="none":!1)||["transform","perspective"].some(o=>e.willChange.includes(o))||["paint","layout","strict","content"].some(o=>{const s=e.contain;return s!=null?s.includes(o):!1})}function et(){return!/^((?!chrome|android).)*safari/i.test(tt())}function X(t){return["html","body","#document"].includes(v(t))}const U=Math.min,D=Math.max,q=Math.round,H={x:1,y:1};function E(t){const n=!y(t)&&t.contextElement?t.contextElement:y(t)?t:null;if(!n)return H;const e=n.getBoundingClientRect(),i=m(n);if(i.boxSizing!=="border-box")return w(n)?{x:n.offsetWidth>0&&q(e.width)/n.offsetWidth||1,y:n.offsetHeight>0&&q(e.height)/n.offsetHeight||1}:H;let o=e.width/parseFloat(i.width),s=e.height/parseFloat(i.height);return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}function T(t,n,e,i){var o,s,l,r;n===void 0&&(n=!1),e===void 0&&(e=!1);const c=t.getBoundingClientRect();let f=H;n&&(i?y(i)&&(f=E(i)):f=E(t));const d=y(t)?b(t):window,u=!et()&&e,a=(c.left+(u&&(o=(s=d.visualViewport)==null?void 0:s.offsetLeft)!=null?o:0))/f.x,h=(c.top+(u&&(l=(r=d.visualViewport)==null?void 0:r.offsetTop)!=null?l:0))/f.y,g=c.width/f.x,p=c.height/f.y;return{width:g,height:p,top:h,right:a+g,bottom:h+p,left:a,x:a,y:h}}function A(t){return((nt(t)?t.ownerDocument:t.document)||window.document).documentElement}function F(t){return y(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ot(t){return T(A(t)).left+F(t).scrollLeft}function pt(t,n,e){const i=w(n),o=A(n),s=T(t,!0,e==="fixed",n);let l={scrollLeft:0,scrollTop:0};const r={x:0,y:0};if(i||!i&&e!=="fixed")if((v(n)!=="body"||W(o))&&(l=F(n)),w(n)){const c=T(n,!0);r.x=c.x+n.clientLeft,r.y=c.y+n.clientTop}else o&&(r.x=ot(o));return{x:s.left+l.scrollLeft-r.x,y:s.top+l.scrollTop-r.y,width:s.width,height:s.height}}function V(t){if(v(t)==="html")return t;const n=t.assignedSlot||t.parentNode||(K(t)?t.host:null)||A(t);return K(n)?n.host:n}function G(t){return!w(t)||m(t).position==="fixed"?null:t.offsetParent}function mt(t){let n=V(t);for(;w(n)&&!X(n);){if(j(n))return n;n=V(n)}return null}function J(t){const n=b(t);let e=G(t);for(;e&&gt(e)&&m(e).position==="static";)e=G(e);return e&&(v(e)==="html"||v(e)==="body"&&m(e).position==="static"&&!j(e))?n:e||mt(t)||n}function wt(t){if(w(t))return{width:t.offsetWidth,height:t.offsetHeight};const n=T(t);return{width:n.width,height:n.height}}function xt(t){let{rect:n,offsetParent:e,strategy:i}=t;const o=w(e),s=A(e);if(e===s)return n;let l={scrollLeft:0,scrollTop:0},r={x:1,y:1};const c={x:0,y:0};if((o||!o&&i!=="fixed")&&((v(e)!=="body"||W(s))&&(l=F(e)),w(e))){const f=T(e);r=E(e),c.x=f.x+e.clientLeft,c.y=f.y+e.clientTop}return{width:n.width*r.x,height:n.height*r.y,x:n.x*r.x-l.scrollLeft*r.x+c.x,y:n.y*r.y-l.scrollTop*r.y+c.y}}function yt(t,n){const e=b(t),i=A(t),o=e.visualViewport;let s=i.clientWidth,l=i.clientHeight,r=0,c=0;if(o){s=o.width,l=o.height;const f=et();(f||!f&&n==="fixed")&&(r=o.offsetLeft,c=o.offsetTop)}return{width:s,height:l,x:r,y:c}}function bt(t){var n;const e=A(t),i=F(t),o=(n=t.ownerDocument)==null?void 0:n.body,s=D(e.scrollWidth,e.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),l=D(e.scrollHeight,e.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0);let r=-i.scrollLeft+ot(t);const c=-i.scrollTop;return m(o||e).direction==="rtl"&&(r+=D(e.clientWidth,o?o.clientWidth:0)-s),{width:s,height:l,x:r,y:c}}function it(t){const n=V(t);return X(n)?t.ownerDocument.body:w(n)&&W(n)?n:it(n)}function rt(t,n){var e;n===void 0&&(n=[]);const i=it(t),o=i===((e=t.ownerDocument)==null?void 0:e.body),s=b(i);return o?n.concat(s,s.visualViewport||[],W(i)?i:[]):n.concat(i,rt(i))}function vt(t,n){const e=T(t,!0,n==="fixed"),i=e.top+t.clientTop,o=e.left+t.clientLeft,s=w(t)?E(t):{x:1,y:1},l=t.clientWidth*s.x,r=t.clientHeight*s.y,c=o*s.x,f=i*s.y;return{top:f,left:c,right:c+l,bottom:f+r,x:c,y:f,width:l,height:r}}function Q(t,n,e){return n==="viewport"?I(yt(t,e)):y(n)?vt(n,e):I(bt(A(t)))}function At(t,n){const e=n.get(t);if(e)return e;let i=rt(t).filter(r=>y(r)&&v(r)!=="body"),o=null;const s=m(t).position==="fixed";let l=s?V(t):t;for(;y(l)&&!X(l);){const r=m(l),c=j(l);(s?!c&&!o:!c&&r.position==="static"&&!!o&&["absolute","fixed"].includes(o.position))?i=i.filter(d=>d!==l):o=r,l=V(l)}return n.set(t,i),i}function Ct(t){let{element:n,boundary:e,rootBoundary:i,strategy:o}=t;const l=[...e==="clippingAncestors"?At(n,this._c):[].concat(e),i],r=l[0],c=l.reduce((f,d)=>{const u=Q(n,d,o);return f.top=D(u.top,f.top),f.right=U(u.right,f.right),f.bottom=U(u.bottom,f.bottom),f.left=D(u.left,f.left),f},Q(n,r,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}const Lt={getClippingRect:Ct,convertOffsetParentRelativeRectToViewportRelativeRect:xt,isElement:y,getDimensions:wt,getOffsetParent:J,getDocumentElement:A,getScale:E,async getElementRects(t){let{reference:n,floating:e,strategy:i}=t;const o=this.getOffsetParent||J,s=this.getDimensions;return{reference:pt(n,await o(e),i),floating:{x:0,y:0,...await s(e)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>m(t).direction==="rtl"},Et=(t,n,e)=>{const i=new Map,o={platform:Lt,...e},s={...o.platform,_c:i};return ct(t,n,{...o,platform:s})};export{Ot as a,Et as c,Dt as o};
